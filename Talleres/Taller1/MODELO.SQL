
CREATE TABLE PACIENTE
( 
	IDPACIENTE           integer IDENTITY ( 1,1 ) ,
	APELLIDOS            varchar(100)  NOT NULL ,
	CORREO               varchar(100)  NOT NULL ,
	NOMBRES              varchar(100)  NOT NULL ,
	CONSTRAINT XPKPACIENTE PRIMARY KEY (IDPACIENTE ASC)
)
go



CREATE TABLE HABITACION
( 
	IDHABITACION         integer IDENTITY ( 1,1 ) ,
	PISO                 integer  NOT NULL ,
	NUMERO               integer  NOT NULL ,
	CONSTRAINT XPKHABITACION PRIMARY KEY (IDHABITACION ASC)
)
go



CREATE TABLE TIPO
( 
	IDTIPO               integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKTIPO PRIMARY KEY (IDTIPO ASC)
)
go



CREATE TABLE PROFESION
( 
	IDPROFESION          integer  NOT NULL ,
	NOMBRE               varchar(150)  NOT NULL ,
	CONSTRAINT XPKPROFESION PRIMARY KEY (IDPROFESION ASC)
)
go



CREATE TABLE EMPLEADO
( 
	IDEMPLEADO           integer IDENTITY ( 1,1 ) ,
	IDTIPO               integer  NOT NULL ,
	IDPROFESION          integer  NOT NULL ,
	APELLIDOS            varchar(100)  NOT NULL ,
	NOMBRES              varchar(100)  NOT NULL ,
	CORREO               varchar(100)  NOT NULL ,
	CONSTRAINT XPKEMPLEADO PRIMARY KEY (IDEMPLEADO ASC),
	CONSTRAINT FK_EMPLEADO_TIPO FOREIGN KEY (IDTIPO) REFERENCES TIPO(IDTIPO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_EMPLEADO_PROFESION FOREIGN KEY (IDPROFESION) REFERENCES PROFESION(IDPROFESION)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE HOSPITALIZACION
( 
	IDHOSPITALIZACION    integer IDENTITY ( 1,1 ) ,
	IDPACIENTE           integer  NOT NULL ,
	FECHA_INGRESO        datetime  NULL ,
	IDHABITACION         integer  NOT NULL ,
	MOTIVO               varchar(2000)  NULL ,
	ADMINISTRATIVO       integer  NOT NULL ,
	MEDICO               integer  NOT NULL ,
	CONSTRAINT XPKHOSPITALIZACION PRIMARY KEY (IDHOSPITALIZACION ASC),
	CONSTRAINT FK_HOSPITALIZACION_PACIENTE FOREIGN KEY (IDPACIENTE) REFERENCES PACIENTE(IDPACIENTE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_HOSPITALIZACION_HABITACION FOREIGN KEY (IDHABITACION) REFERENCES HABITACION(IDHABITACION)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_HOSPITALIZACION_ADMINISTRATIVO FOREIGN KEY (ADMINISTRATIVO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_HOSPITALIZACION_MEDICO FOREIGN KEY (MEDICO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE ALTA
( 
	IDHOSPITALIZACION    integer  NOT NULL ,
	IDEMPLEADO           integer  NOT NULL ,
	FECHA_ATENCION       datetime  NOT NULL ,
	FECHA_ALTA           datetime  NOT NULL ,
	DIAGNOSTICO          varchar(2000)  NOT NULL ,
	CONSTRAINT XPKALTA PRIMARY KEY (IDHOSPITALIZACION ASC),
	CONSTRAINT FK_ALTA_HOSPITALIZACION FOREIGN KEY (IDHOSPITALIZACION) REFERENCES HOSPITALIZACION(IDHOSPITALIZACION)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_ALTA_MEDICO FOREIGN KEY (IDEMPLEADO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE VISITA
( 
	IDVISITA             integer IDENTITY ( 1,1 ) ,
	IDHOSPITALIZACION    integer  NOT NULL ,
	IDEMPLEADO           integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	DIAGNOSTICO          varchar(2000)  NOT NULL ,
	CONSTRAINT XPKVISITA PRIMARY KEY (IDVISITA ASC),
	CONSTRAINT FK_VISITA_HOSPITALIZACION FOREIGN KEY (IDHOSPITALIZACION) REFERENCES HOSPITALIZACION(IDHOSPITALIZACION)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VISITA_MEDICO FOREIGN KEY (IDEMPLEADO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE ROL
( 
	IDROL                integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKROL PRIMARY KEY (IDROL ASC)
)
go



CREATE TABLE USUARIO
( 
	IDEMPLEADO           integer  NOT NULL ,
	USUARIO              varchar(50)  NOT NULL ,
	CLAVE                varchar(100)  NOT NULL ,
	ACTIVO               integer  NOT NULL ,
	IDROL                integer  NOT NULL ,
	CONSTRAINT XPKUSUARIO PRIMARY KEY (IDEMPLEADO ASC),
	CONSTRAINT FK_USUARIO_EMPLEADO FOREIGN KEY (IDEMPLEADO) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_USUARIO_ROL FOREIGN KEY (IDROL) REFERENCES ROL(IDROL)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


